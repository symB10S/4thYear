clear cam

cam = webcam(1);
counter = 0;
vidWriter = VideoWriter('frames.avi');
open(vidWriter);

fig = figure('NumberTitle','off','MenuBar','none');
fig.Name = 'My Camera';
ax = axes(fig); 
axis(ax,'image');

while counter <= 100
    % Acquire frame for processing
    img = snapshot(cam);
    % Write frame to video
    writeVideo(vidWriter,img);
    
    im = image(ax,zeros(size(frame),'uint8')); 
    
    preview(cam,img)
    counter = counter + 1;
end

close(vidWriter);
clear cam